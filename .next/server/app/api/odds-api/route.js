(()=>{var e={};e.id=563,e.ids=[563],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10625:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>k,routeModule:()=>c,serverHooks:()=>m,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>b});var s={};t.r(s),t.d(s,{GET:()=>u});var o=t(96559),a=t(48088),n=t(37719),i=t(32190);let l={nba:"basketball_nba",nfl:"americanfootball_nfl",mlb:"baseball_mlb",nhl:"icehockey_nhl",soccer:"soccer"},p=["h2h","spreads","totals"];async function u(e){try{let r,t=process.env.ODDS_API_KEY;if(!t)return console.error("API key not found in environment variables"),i.NextResponse.json({error:"API key not found"},{status:500});let{searchParams:s}=new URL(e.url),o=s.get("sport")?.toLowerCase()||"nba",a=s.get("markets")?.toLowerCase()||"h2h",n="false"!==s.get("includeLinks");console.log("Request params:",{sport:o,markets:a,includeLinks:n});let u=l[o];if(!u)return console.error("Invalid sport:",o),i.NextResponse.json({error:"Invalid sport"},{status:400});let c=a.split(",").map(e=>e.trim()).filter(e=>!p.includes(e));if(c.length>0)return console.error("Invalid markets:",c),i.NextResponse.json({error:`Invalid markets: ${c.join(", ")}`},{status:400});let d=`https://api.the-odds-api.com/v4/sports/${u}/odds/?apiKey=${t}&regions=us,eu&markets=${a}&oddsFormat=american`;console.log("Fetching from:",d);let b=await fetch(d),m=await b.text();if(!b.ok)return console.error("API Error:",{status:b.status,statusText:b.statusText,response:m}),i.NextResponse.json({error:`Error fetching odds: ${b.statusText}`,details:m},{status:b.status});try{r=JSON.parse(m)}catch(e){return console.error("Failed to parse API response:",m),i.NextResponse.json({error:"Invalid response from odds API"},{status:500})}let k=["betfair","bet365","unibet","williamhill","ladbrokes","bwin","10bet","betsson","betway","888sport","coral","leovegas","mrgreen","redbet","coolbet","betfred","matchbook","sportingbet","parimatch","marathonbet","vbet","stoiximan","efbet","betclic","bet-at-home","interwetten","tipico","winamax","betdaq","expekt","energybet","favbet","merkur","novibet","pokerstars","sbobet","sportpesa","superbet","tipwin","totolotek","toto","youwin"];return Array.isArray(r)&&(r=r.map(e=>({...e,bookmakers:e.bookmakers.filter(e=>"pinnacle"===e.key||!k.includes(e.key))}))),Array.isArray(r)&&r.length>0&&r[0].bookmakers&&r[0].bookmakers.length>0&&console.log("First bookmaker object:",r[0].bookmakers[0]),!n&&Array.isArray(r)&&(r=r.map(e=>({...e,bookmakers:e.bookmakers?.map(e=>{let{url:r,...t}=e;return t})||[]}))),console.log("API Response:",{status:b.status,dataLength:Array.isArray(r)?r.length:"not an array"}),i.NextResponse.json(r)}catch(e){return console.error("Unexpected error:",e),i.NextResponse.json({error:e.message,stack:void 0},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/odds-api/route",pathname:"/api/odds-api",filename:"route",bundlePath:"app/api/odds-api/route"},resolvedPagePath:"/Users/michaelcurley/Documents/GitHub/Oddsy/src/app/api/odds-api/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:d,workUnitAsyncStorage:b,serverHooks:m}=c;function k(){return(0,n.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:b})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[447,580],()=>t(10625));module.exports=s})();